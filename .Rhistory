thisPlot + geom_text(data=annotation, aes( x=x, y=y, label=label),
color="orange",
size=7 , angle=45, fontface="bold" )
df <- dataSource
annotation <- data.frame(
x = c(2,4.5),
y = c(20,25),
label = c("label 1", "label 2")
)
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
thisPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
thisPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
thisPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
library(magick)
tmp1 <- image_read('bitmap/dataSource_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/dataSource_horizontal.png', format='png')
dataSource_img <- tmp2
image_info(tmp1)
image_info(tmp2)
midPurples4 <- PurpleLong[4:7]
show_col(midPurples)
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
library(magick)
tmp1 <- image_read('bitmap/dataSource_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/dataSource_horizontal.png', format='png')
dataSource_img <- tmp2
image_info(tmp1)
image_info(tmp2)
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.19,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
library(magick)
tmp1 <- image_read('bitmap/dataSource_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/dataSource_horizontal.png', format='png')
dataSource_img <- tmp2
image_info(tmp1)
image_info(tmp2)
library(scales)
GreyLong <- colorRampPalette(brewer.pal(9, 'Greys'))(12)
lowGreys2 <- GreyLong[3:4]
show_col(lowGreys)
GreenLong <- colorRampPalette(brewer.pal(9, 'Greens'))(12)
lowGreens2 <- GreenLong[5:6]
show_col(lowGreens)
OrangeLong <- colorRampPalette(brewer.pal(9, 'Oranges'))(14)
midOranges2 <- OrangeLong[5:6]
show_col(midOranges)
RedLong <- colorRampPalette(brewer.pal(9, 'Reds'))(15)
lowReds3 <- RedLong[4:6]
show_col(lowReds)
PurpleLong <- colorRampPalette(brewer.pal(9, 'Purples'))(16)
midPurples4 <- PurpleLong[5:8]
show_col(midPurples)
Value
Value*100
percent <- format(round(Value * 100, 0), nsmall = 0)
percent
percent <- (round(Value * 100, digits=0)
percent <- (round(Value * 100, digits=0))
percent <- (round(Value * 100, digits=0))
percent
thisTable <- studyDesignTable
Name <- thisTable$Study_design
Value <- thisTable$percent
Absolute <- thisTable$n
# percent <- format(round(Value * 100, 0), nsmall = 0)
percent <- (round(Value * 100, digits=0))
Str <- paste0(Absolute, ' (', percent, '%)')
# calculate interval position
df <-  data.frame(Name, Absolute, Value, Str) %>%
mutate(Name = factor(Name, levels = Name),
Pos = cumsum(lag(Value, default = 0)) + Value/2)
studyDesign_df <- df
studyDesign_df
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.18,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.1), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.1), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.2), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.1), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.14), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.07), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.22,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.14), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.07), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.22,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.15), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
library(magick)
tmp1 <- image_read('bitmap/studyDesign_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/studyDesign_horizontal.png', format='png')
studyDesign_img <- tmp2
image_info(tmp1)
image_info(tmp2)
thisData <- de %>%
select(`Type of data`) %>%
drop_na()
thisTable <- tabyl(thisData$`Type of data`)
names(thisTable)[1] <- 'Type_of_data'
thisTable <- thisTable[order(-thisTable$n),]
rownames(thisTable) <- c()
formattable(thisTable, align='l')
typeOfDataTable <- thisTable
thisTable <- typeOfDataTable
Name <- thisTable$Type_of_data
Value <- thisTable$percent
Absolute <- thisTable$n
percent <- (round(Value * 100, digits=0))
Str <- paste0(Absolute, ' (', percent, '%)')
# calculate interval position
df <-  data.frame(Name, Absolute, Value, Str) %>%
mutate(Name = factor(Name, levels = Name),
Pos = cumsum(lag(Value, default = 0)) + Value/2)
TypeOfData <- df
TypeOfData
df <- TypeOfData
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.22,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.15), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08), size = 5) +
labelonly +
scale_fill_manual(values = lowGreens2)
# ggsave(file="svg/typeOfData_horizontal_raw.svg", plot=thisPlot, width=10, height=8)
ggsave(file="svg/typeOfData_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/typeOfData_horizontal_raw.png", plot=thisPlot)
typeHorizontalPlot <- thisPlot
typeHorizontalPlot
library(magick)
tmp1 <- image_read('bitmap/typeOfData_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/typeOfData_horizontal.png', format='png')
typeOfData_img <- tmp2
image_info(tmp1)
image_info(tmp2)
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.22,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.15), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.1), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.22,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.15), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.1), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.14), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.09), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- studyDesign_df
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.13), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08), size = 5) +
labelonly +
scale_fill_manual(values = lowReds3)
ggsave(file="svg/studyDesign_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/studyDesign_horizontal_raw.png", plot=thisPlot)
designHorizontalPlot <- thisPlot
designHorizontalPlot
df <- TypeOfData
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.13), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08), size = 5) +
labelonly +
scale_fill_manual(values = lowGreens2)
# ggsave(file="svg/typeOfData_horizontal_raw.svg", plot=thisPlot, width=10, height=8)
ggsave(file="svg/typeOfData_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/typeOfData_horizontal_raw.png", plot=thisPlot)
typeHorizontalPlot <- thisPlot
typeHorizontalPlot
df <- TypeOfData
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Name),
position = position_fill(vjust = 0.13), size = 5) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08), size = 5) +
labelonly +
scale_fill_manual(values = lowGreens2)
# ggsave(file="svg/typeOfData_horizontal_raw.svg", plot=thisPlot, width=10, height=8)
ggsave(file="svg/typeOfData_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/typeOfData_horizontal_raw.png", plot=thisPlot)
typeHorizontalPlot <- thisPlot
typeHorizontalPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.19,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.1),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.22,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
df <- dataSource
thisPlot <- ggplot(data = df, aes(x = Pos, y = 0.2,
width = Value, fill = Name)) +
geom_col(position = "identity", show.legend = FALSE) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.08),
alpha = ifelse(df$Name == 'Peer-reviewed', 0, 1),
size = 4, angle = 90, hjust = 0.35) +
geom_text(aes(label = Str),
position = position_fill(vjust = 0.11),
alpha = ifelse(df$Name == 'Peer-reviewed', 1, 0),
size = 5, hjust = 0.35) +
labelonly +
scale_fill_manual(values = midPurples4)
ggsave(file="svg/dataSource_horizontal_raw.svg", plot=thisPlot)
ggsave(file="bitmap/dataSource_horizontal_raw.png", plot=thisPlot)
dataSourceHorizontalPlot <- thisPlot
dataSourceHorizontalPlot
thisPlot
library(magick)
tmp1 <- image_read('bitmap/dataSource_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/dataSource_horizontal.png', format='png')
dataSource_img <- tmp2
image_info(tmp1)
image_info(tmp2)
library(magick)
tmp1 <- image_read('bitmap/typeOfData_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/typeOfData_horizontal.png', format='png')
typeOfData_img <- tmp2
image_info(tmp1)
image_info(tmp2)
library(magick)
tmp1 <- image_read('bitmap/studyDesign_horizontal_raw.png')
tmp2 <- image_trim(tmp1)
image_write(tmp2, path='bitmap/studyDesign_horizontal.png', format='png')
studyDesign_img <- tmp2
image_info(tmp1)
image_info(tmp2)
# heatmap with marginal histograms
devtools::install_github("ropensci/iheatmapr")
install.packages('magrittr')
install.packages("magrittr")
install.packages("magrittr")
install.packages("magrittr")
# devtools::install_github("ropensci/iheatmapr")
pkgs <- c('magrittr', 'glue', 'rlang', 'fansi', 'yaml', 'jsonlite')
remove.packages(pkgs)
install.packages('magrittr')
install.packages("magrittr")
detach(pkgs)
detach("package:glue", unload=TRUE)
install.packages("glue")
install.packages("glue")
devtools::install_github("ropensci/iheatmapr")
install.packages("rlang")
remove.packages('rlang')
install.packages("rlang")
library(iheatmapr)
